
Database migration tool:

pip install alembic


> alembic init migration

konfigurasi:

1. alembic.ini

sqlalchemy.url = postgresql://postgres:postgres@localhost:5432/store


2. migration/env.py

from main import metadata

target_metadata = metadata


3. drop table first in postgresql (delete existing record)

\c store
store=# drop table books ;


4. alembic revision --autogenerate -m 'initial'

5. alembic upgrade head


Setiap kali kita merubah struktur table, jalankan step 4-5